<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>无味春风</title>
  
  <subtitle>半城烟雨</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://yoursite.com/"/>
  <updated>2019-09-12T02:58:04.164Z</updated>
  <id>http://yoursite.com/</id>
  
  <author>
    <name>张帆</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title></title>
    <link href="http://yoursite.com/2019/09/12/springboot%E5%85%A8%E5%AE%B6%E6%A1%B6/"/>
    <id>http://yoursite.com/2019/09/12/springboot全家桶/</id>
    <published>2019-09-12T02:58:25.846Z</published>
    <updated>2019-09-12T02:58:04.164Z</updated>
    
    <content type="html"><![CDATA[<h2 id="springboot全家桶"><a href="#springboot全家桶" class="headerlink" title="springboot全家桶"></a>springboot全家桶</h2><h4 id="springboot-mybatis-druid"><a href="#springboot-mybatis-druid" class="headerlink" title="springboot + mybatis + druid"></a>springboot + mybatis + druid</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--mybatis--&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis.spring.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">version</span>&gt;</span>版本号<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">      <span class="comment">&lt;!-- MySql驱动 --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">      <span class="comment">&lt;!--druid--&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>druid-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">version</span>&gt;</span>版本号<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line"><span class="attr">  datasource:</span></span><br><span class="line"><span class="attr">    druid:</span></span><br><span class="line">      <span class="comment"># 数据库访问配置, 使用druid数据源</span></span><br><span class="line"><span class="attr">      type:</span> <span class="string">com.alibaba.druid.pool.DruidDataSource</span></span><br><span class="line"><span class="attr">      driver-class-name:</span> <span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line"><span class="attr">      url:</span> <span class="attr">jdbc:mysql://10.253.130.55:3306/topifsp?serverTimezone=Asia/Shanghai&amp;characterEncoding=utf8&amp;useUnicode=true&amp;useSSL=false</span></span><br><span class="line"><span class="attr">      username:</span> <span class="string">yhjr_dev_dba</span></span><br><span class="line"><span class="attr">      password:</span> <span class="string">yhjrdb2019*</span></span><br><span class="line">      <span class="comment"># 连接池配置</span></span><br><span class="line"><span class="attr">      initial-size:</span> <span class="number">5</span></span><br><span class="line"><span class="attr">      min-idle:</span> <span class="number">5</span></span><br><span class="line"><span class="attr">      max-active:</span> <span class="number">20</span></span><br><span class="line">      <span class="comment"># 连接等待超时时间</span></span><br><span class="line"><span class="attr">      max-wait:</span> <span class="number">30000</span></span><br><span class="line">      <span class="comment"># 配置检测可以关闭的空闲连接间隔时间</span></span><br><span class="line"><span class="attr">      time-between-eviction-runs-millis:</span> <span class="number">60000</span></span><br><span class="line">      <span class="comment"># 配置连接在池中的最小生存时间</span></span><br><span class="line"><span class="attr">      min-evictable-idle-time-millis:</span> <span class="number">300000</span></span><br><span class="line"><span class="attr">      validation-query:</span> <span class="string">select</span> <span class="string">'1'</span> <span class="string">from</span> <span class="string">dual</span></span><br><span class="line"><span class="attr">      test-while-idle:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">      test-on-borrow:</span> <span class="literal">false</span></span><br><span class="line"><span class="attr">      test-on-return:</span> <span class="literal">false</span></span><br><span class="line">      <span class="comment"># 打开PSCache，并且指定每个连接上PSCache的大小</span></span><br><span class="line"><span class="attr">      pool-prepared-statements:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">      max-open-prepared-statements:</span> <span class="number">20</span></span><br><span class="line"><span class="attr">      max-pool-prepared-statement-per-connection-size:</span> <span class="number">20</span></span><br><span class="line">      <span class="comment"># 配置监控统计拦截的filters, 去掉后监控界面sql无法统计, 'wall'用于防火墙</span></span><br><span class="line"><span class="attr">      filters:</span> <span class="string">stat,wall</span></span><br><span class="line">      <span class="comment"># Spring监控AOP切入点，如x.y.z.service.*,配置多个英文逗号分隔</span></span><br><span class="line"><span class="attr">      aop-patterns:</span> <span class="string">com.springboot.servie.*</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">      <span class="comment"># WebStatFilter配置</span></span><br><span class="line"><span class="attr">      web-stat-filter:</span></span><br><span class="line"><span class="attr">        enabled:</span> <span class="literal">true</span></span><br><span class="line">        <span class="comment"># 添加过滤规则</span></span><br><span class="line"><span class="attr">        url-pattern:</span> <span class="string">/*</span></span><br><span class="line">        <span class="comment"># 忽略过滤的格式</span></span><br><span class="line"><span class="attr">        exclusions:</span> <span class="string">'*.js,*.gif,*.jpg,*.png,*.css,*.ico,/druid/*'</span></span><br><span class="line"></span><br><span class="line">      <span class="comment"># StatViewServlet配置</span></span><br><span class="line"><span class="attr">      stat-view-servlet:</span></span><br><span class="line"><span class="attr">        enabled:</span> <span class="literal">true</span></span><br><span class="line">        <span class="comment"># 访问路径为/druid时，跳转到StatViewServlet</span></span><br><span class="line"><span class="attr">        url-pattern:</span> <span class="string">/druid/*</span></span><br><span class="line">        <span class="comment"># 是否能够重置数据</span></span><br><span class="line"><span class="attr">        reset-enable:</span> <span class="literal">false</span></span><br><span class="line">        <span class="comment"># 需要账号密码才能访问控制台</span></span><br><span class="line"><span class="attr">        login-username:</span> <span class="string">admin</span></span><br><span class="line"><span class="attr">        login-password:</span> <span class="string">admin</span></span><br><span class="line">        <span class="comment"># IP白名单</span></span><br><span class="line">        <span class="comment"># allow: 127.0.0.1</span></span><br><span class="line">        <span class="comment">#　IP黑名单（共同存在时，deny优先于allow）</span></span><br><span class="line">        <span class="comment"># deny: 192.168.1.218</span></span><br><span class="line"></span><br><span class="line">      <span class="comment"># 配置StatFilter</span></span><br><span class="line"><span class="attr">      filter:</span></span><br><span class="line"><span class="attr">        stat:</span></span><br><span class="line"><span class="attr">          log-slow-sql:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><h4 id="druid的配置项"><a href="#druid的配置项" class="headerlink" title="druid的配置项"></a>druid的配置项</h4><table><thead><tr><th align="left">配置</th><th align="left">缺省值</th><th align="left">说明</th></tr></thead><tbody><tr><td align="left">name</td><td align="left"></td><td align="left">配置这个属性的意义在于，如果存在多个数据源，<br>监控的时候 可以通过名字来区分开来。如果没有配置，<br>将会生成一个名字， 格式是：”DataSource-“ + System.identityHashCode(this)</td></tr><tr><td align="left">jdbcUrl</td><td align="left"></td><td align="left">连接数据库的url，不同数据库不一样。例如： <br>mysql : jdbc:mysql://10.20.153.104:3306/druid2  <br>oracle : jdbc:oracle:thin:@10.20.149.85:1521:ocnauto</td></tr><tr><td align="left">username</td><td align="left"></td><td align="left">连接数据库的用户名</td></tr><tr><td align="left">password</td><td align="left"></td><td align="left">连接数据库的密码。如果你不希望密码直接写在配置文件中， <br>可以使用ConfigFilter。详细看这里： <br><a href="https://github.com/alibaba/druid/wiki/使用ConfigFilter" target="_blank" rel="noopener">https://github.com/alibaba/druid/wiki/%E4%BD%BF%E7%94%A8ConfigFilter</a></td></tr><tr><td align="left">driverClassName</td><td align="left">根据url自动识别</td><td align="left">这一项可配可不配，如果不配置druid会根据url自动识别dbType，<br>然后选择相应的driverClassName</td></tr><tr><td align="left">initialSize</td><td align="left">0</td><td align="left">初始化时建立物理连接的个数。初始化发生在显示调用init方法，或者第一次getConnection时</td></tr><tr><td align="left">maxActive</td><td align="left">8</td><td align="left">最大连接池数量</td></tr><tr><td align="left">maxIdle</td><td align="left">8</td><td align="left">已经不再使用，配置了也没效果</td></tr><tr><td align="left">minIdle</td><td align="left"></td><td align="left">最小连接池数量</td></tr><tr><td align="left">maxWait</td><td align="left"></td><td align="left">获取连接时最大等待时间，单位毫秒。配置了maxWait之后， <br>缺省启用公平锁，并发效率会有所下降， <br>如果需要可以通过配置useUnfairLock属性为true使用非公平锁。</td></tr><tr><td align="left">poolPreparedStatements</td><td align="left">false</td><td align="left">是否缓存preparedStatement，也就是PSCache。 <br>PSCache对支持游标的数据库性能提升巨大，比如说oracle。 <br>在mysql5.5以下的版本中没有PSCache功能，建议关闭掉。<br>作者在5.5版本中使用PSCache，通过监控界面发现PSCache有缓存命中率记录， 该应该是支持PSCache。<br></td></tr><tr><td align="left">maxOpenPreparedStatements</td><td align="left">-1</td><td align="left">要启用PSCache，必须配置大于0，当大于0时， <br>poolPreparedStatements自动触发修改为true。 <br>在Druid中，不会存在Oracle下PSCache占用内存过多的问题， <br>可以把这个数值配置大一些，比如说100</td></tr><tr><td align="left">validationQuery</td><td align="left"></td><td align="left">用来检测连接是否有效的sql，要求是一个查询语句。 <br>如果validationQuery为null，testOnBorrow、testOnReturn、 <br>testWhileIdle都不会其作用。</td></tr><tr><td align="left">testOnBorrow</td><td align="left">true</td><td align="left">申请连接时执行validationQuery检测连接是否有效，做了这个配置会降低性能。</td></tr><tr><td align="left">testOnReturn</td><td align="left">false</td><td align="left">归还连接时执行validationQuery检测连接是否有效，做了这个配置会降低性能</td></tr><tr><td align="left">testWhileIdle</td><td align="left">false</td><td align="left">建议配置为true，不影响性能，并且保证安全性。 <br>申请连接的时候检测，如果空闲时间大于 <br>timeBetweenEvictionRunsMillis， <br>执行validationQuery检测连接是否有效。</td></tr><tr><td align="left">timeBetweenEvictionRunsMillis</td><td align="left"></td><td align="left">有两个含义： <br>1) Destroy线程会检测连接的间隔时间 <br>2) testWhileIdle的判断依据，详细看testWhileIdle属性的说明</td></tr><tr><td align="left">numTestsPerEvictionRun</td><td align="left"></td><td align="left">不再使用，一个DruidDataSource只支持一个EvictionRun</td></tr><tr><td align="left">minEvictableIdleTimeMillis</td><td align="left"></td><td align="left"></td></tr><tr><td align="left">connectionInitSqls</td><td align="left"></td><td align="left">物理连接初始化的时候执行的sql</td></tr><tr><td align="left">exceptionSorter</td><td align="left">根据dbType自动识别</td><td align="left">当数据库抛出一些不可恢复的异常时，抛弃连接</td></tr><tr><td align="left">filters</td><td align="left"></td><td align="left">属性类型是字符串，通过别名的方式配置扩展插件， <br>常用的插件有： <br>监控统计用的filter:stat  <br>日志用的filter:log4j <br>防御sql注入的filter:wall</td></tr><tr><td align="left">proxyFilters</td><td align="left"></td><td align="left">类型是List&lt;com.alibaba.druid.filter.Filter&gt;， <br>如果同时配置了filters和proxyFilters， <br>是组合关系，并非替换关系</td></tr></tbody></table>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;springboot全家桶&quot;&gt;&lt;a href=&quot;#springboot全家桶&quot; class=&quot;headerlink&quot; title=&quot;springboot全家桶&quot;&gt;&lt;/a&gt;springboot全家桶&lt;/h2&gt;&lt;h4 id=&quot;springboot-mybatis-dr
      
    
    </summary>
    
    
    
  </entry>
  
  <entry>
    <title></title>
    <link href="http://yoursite.com/2019/09/11/%E6%8E%A5%E7%A7%81%E6%B4%BB%E5%BF%85%E5%A4%87%E7%9A%8410%E4%B8%AA%E5%BC%80%E6%BA%90%E9%A1%B9%E7%9B%AE!/"/>
    <id>http://yoursite.com/2019/09/11/接私活必备的10个开源项目!/</id>
    <published>2019-09-11T02:31:00.943Z</published>
    <updated>2019-09-11T02:48:35.669Z</updated>
    
    <content type="html"><![CDATA[<h2 id="接私活必备的10个开源项目！"><a href="#接私活必备的10个开源项目！" class="headerlink" title="接私活必备的10个开源项目！"></a>接私活必备的10个开源项目！</h2><p>做积极的人，而不是积极废人</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;接私活必备的10个开源项目！&quot;&gt;&lt;a href=&quot;#接私活必备的10个开源项目！&quot; class=&quot;headerlink&quot; title=&quot;接私活必备的10个开源项目！&quot;&gt;&lt;/a&gt;接私活必备的10个开源项目！&lt;/h2&gt;&lt;p&gt;做积极的人，而不是积极废人&lt;/p&gt;

      
    
    </summary>
    
    
    
  </entry>
  
  <entry>
    <title>程序员从入门到入土</title>
    <link href="http://yoursite.com/2019/09/06/note/"/>
    <id>http://yoursite.com/2019/09/06/note/</id>
    <published>2019-09-06T08:09:34.959Z</published>
    <updated>2019-09-06T08:10:14.342Z</updated>
    
    <content type="html"><![CDATA[<p>第一篇文章</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;第一篇文章&lt;/p&gt;

      
    
    </summary>
    
    
    
  </entry>
  
  <entry>
    <title>Hello World</title>
    <link href="http://yoursite.com/2019/09/05/hello-world/"/>
    <id>http://yoursite.com/2019/09/05/hello-world/</id>
    <published>2019-09-05T10:05:01.000Z</published>
    <updated>2019-09-06T08:03:09.787Z</updated>
    
    <content type="html"><![CDATA[<p>来，大郎把药喝了。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;来，大郎把药喝了。&lt;/p&gt;

      
    
    </summary>
    
    
    
  </entry>
  
</feed>
